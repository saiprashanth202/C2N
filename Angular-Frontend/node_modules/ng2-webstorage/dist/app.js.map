{"version":3,"file":"app.js","sourceRoot":"","sources":["../lib/app.ts"],"names":[],"mappings":"OAAO,EAAC,QAAQ,EAAE,MAAM,EAAsB,MAAM,eAAe;OAC5D,EAAC,OAAO,EAAE,iBAAiB,EAAC,MAAM,iBAAiB;OACnD,EAAC,OAAO,EAAC,MAAM,iBAAiB;OAChC,EAAC,mBAAmB,EAAE,qBAAqB,EAAC,MAAM,kBAAkB;OACpE,EAAC,gBAAgB,EAAC,MAAM,sBAAsB;OAE9C,EAAC,gBAAgB,EAAC,MAAM,sBAAsB;AAErD,cAAc,oBAAoB,CAAC;AACnC,cAAc,oBAAoB,CAAC;AACnC,cAAc,kBAAkB,CAAC;AAGjC;IAQC,uBAAoB,MAAa;QAAb,WAAM,GAAN,MAAM,CAAO;QAChC,IAAI,CAAC,mBAAmB,EAAE,CAAC;IAC5B,CAAC;IARM,qBAAO,GAAd,UAAe,EAAkF;YAAlF,2EAAkF,EAAjF,kBAAM,EAAE,wBAAS;QAChC,gBAAgB,CAAC,mBAAmB,CAAC,MAAM,CAAC,CAAC;QAC7C,gBAAgB,CAAC,sBAAsB,CAAC,SAAS,CAAC,CAAC;QACnD,MAAM,CAAC,EAAC,QAAQ,EAAE,aAAa,EAAE,SAAS,EAAE,EAAE,EAAC,CAAC;IACjD,CAAC;IAMO,2CAAmB,GAA3B;QAAA,iBAMC;QALA,EAAE,CAAA,CAAC,MAAM,CAAC;YACT,MAAM,CAAC,gBAAgB,CAAC,SAAS,EAAE,UAAC,KAAkB,IAAK,OAAA,KAAI,CAAC,MAAM,CAAC,GAAG,CAAC;gBAC1E,IAAI,OAAO,GAAW,MAAM,CAAC,cAAc,KAAK,KAAK,CAAC,WAAW,GAAG,OAAO,CAAC,OAAO,GAAG,OAAO,CAAC,KAAK,CAAC;gBACpG,gBAAgB,CAAC,OAAO,CAAC,OAAO,EAAE,KAAK,CAAC,GAAG,CAAC,CAAC;YAC9C,CAAC,CAAC,EAHyD,CAGzD,CAAC,CAAC;IACN,CAAC;IAEK,wBAAU,GAA0B;QAC3C,EAAE,IAAI,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;oBACxB,YAAY,EAAE,EAAE;oBAChB,SAAS,EAAE,CAAC,qBAAqB,EAAE,mBAAmB,CAAC;oBACvD,OAAO,EAAE,EAAE;iBACX,EAAG,EAAE;KACL,CAAC;IACF,kBAAkB;IACX,4BAAc,GAAmE,cAAM,OAAA;QAC9F,EAAC,IAAI,EAAE,MAAM,GAAG;KACf,EAF6F,CAE7F,CAAC;IACF,oBAAC;AAAD,CAAC,AA/BD,IA+BC;AAED,0BAA0B,EAAkF;QAAlF,2EAAkF,EAAjF,kBAAM,EAAE,wBAAS;IAC3C,gBAAgB,CAAC,mBAAmB,CAAC,MAAM,CAAC,CAAC;IAC7C,gBAAgB,CAAC,sBAAsB,CAAC,SAAS,CAAC,CAAC;AACpD,CAAC","sourcesContent":["import {NgModule, NgZone, ModuleWithProviders} from '@angular/core';\r\nimport {LIB_KEY, LIB_KEY_SEPARATOR} from './constants/lib';\r\nimport {STORAGE} from './enums/storage';\r\nimport {LocalStorageService, SessionStorageService} from './services/index';\r\nimport {WebStorageHelper} from './helpers/webStorage';\r\nimport {ModuleConfig} from './interfaces/config';\r\nimport {KeyStorageHelper} from './helpers/keyStorage';\r\n\r\nexport * from './interfaces/index';\r\nexport * from './decorators/index';\r\nexport * from './services/index';\r\n\r\n\r\nexport class Ng2Webstorage {\r\n\r\n\tstatic forRoot({prefix, separator}:ModuleConfig = {prefix: LIB_KEY, separator: LIB_KEY_SEPARATOR}):ModuleWithProviders {\r\n\t\tKeyStorageHelper.setStorageKeyPrefix(prefix);\r\n\t\tKeyStorageHelper.setStorageKeySeparator(separator);\r\n\t\treturn {ngModule: Ng2Webstorage, providers: []};\r\n\t}\r\n\r\n\tconstructor(private ngZone:NgZone) {\r\n\t\tthis.initStorageListener();\r\n\t}\r\n\r\n\tprivate initStorageListener() {\r\n\t\tif(window)\r\n\t\t\twindow.addEventListener('storage', (event:StorageEvent) => this.ngZone.run(() => {\r\n\t\t\t\tlet storage:STORAGE = window.sessionStorage === event.storageArea ? STORAGE.session : STORAGE.local;\r\n\t\t\t\tWebStorageHelper.refresh(storage, event.key);\r\n\t\t\t}));\r\n\t}\r\n\r\nstatic decorators: DecoratorInvocation[] = [\n{ type: NgModule, args: [{\r\n\tdeclarations: [],\r\n\tproviders: [SessionStorageService, LocalStorageService],\r\n\timports: []\r\n}, ] },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: NgZone, },\n];\n}\r\n\r\nexport function configure({prefix, separator}:ModuleConfig = {prefix: LIB_KEY, separator: LIB_KEY_SEPARATOR}) {\r\n\tKeyStorageHelper.setStorageKeyPrefix(prefix);\r\n\tKeyStorageHelper.setStorageKeySeparator(separator);\r\n}\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}